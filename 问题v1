对话内容的持久化存储？
有一个status记录当前的开发状态，可以中止，比如用户发起一些讨论，需要确认是否继续。这会是需要进入一个专门的模式吗？比如功能开发模式？

！！！！！理想的 Sub-agent 行为 应该是：

1. 自我修复 (Self-Correction) ：遇到错误先自己尝试解决（比如改代码、换工具）。这是 Sub-agent 的核心价值 —— 屏蔽局部复杂性。
2. 详细汇报 (Detailed Report) ：如果最终还是失败，或者任务完成但有瑕疵，必须返回 结构化 的报告，包含：
   - Status : Success / Failed
   - Summary : 简述做了什么。
   - Artifacts : 产出了哪些文件。
   - Errors : 如果失败，具体的错误日志是什么（关键！）。

目前没有human in the loop, 当不调用工具的时候，返回到用户对话模式

工具的返回是需要定义的，成功时是什么，失败时except是什么。并且一定需要结构话的字符串这样llm才读的懂


关键点：
上下文压缩和窗口的设置
rodemap是不是还是要有，起码在读过的代码得有？
错误处理，要看到什么信息，怎么自动循环规划，要有什么执行权限，什么情况需要询问用户
对话内容的表示，怎么展示核心内容，又有足够的提示上下文便于检索
什么时候需要创建关键记忆，，比如用户的关键表达？或者是核心内容的疑问阐释？还需要有类似break point的机制？








